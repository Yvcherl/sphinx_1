# 2. 系统镜像烧录

运行板卡时需要三个步骤：烧录系统，启动系统和系统登录。

带emmc的NNEWN R系列板卡在出厂时都默认烧录了系统镜像， 如果不需要烧录新镜像的话可以跳过本章节章节。

NNEWN R系列板卡的系统镜像包含了多种根文件系统，我们可以根据自己需求选择相应的镜像下载。

## 注意

系统镜像是NNEWN R板卡的核心， 它包括了linux内核，基本的程序等，是运行LubanCat-RK板卡的必须， 所以我们需要在运行板卡前为板卡安装镜像。

## 2.1. 镜像获取

### 后续再改

### 2.1.1. 镜像命名规则

**lubancat-(处理器型号)-(根文件系统)-(桌面类型)-(更新时间)_update**

#### 2.1.1.1. 处理器型号

1. **rk3588** ：使用rk3588处理器的LubanCat板卡，如LubanCat-4，LubanCat-5板卡。

#### 2.1.1.2. 根文件系统

1. **debian11** ： 代表系统使用的根文件系统是debian11。

#### 2.1.1.3. 桌面类型

1. **gnome** ：使用gnome套件的桌面版镜像。
2. **lite** ：命令行版，无桌面。

#### 2.1.1.4. 更新日期

更新日期的格式为 **yyyymmdd_update** 即 **年月日_update**。

#### 2.1.1.5. 举例说明

我们以LubanCat-rk3588 debian11的通用镜像为例：

**lubancat-rk3588-debian11-gnome-20230807_update**

1. 板卡的适用型号：适合LubanCat使用rk3588处理器的板卡。
2. 根文件系统：debian11。
3. 系统类别：gnome·桌面版。
4. 更新日期：2023年08月07日。

## 2.2. Windows平台烧录镜像

### 2.2.1. 烧录镜像到eMMC

#### 2.2.1.1. 工具获取和安装

烧录镜像到eMMC需要使用到烧录工具 **RKDevTool** 和驱动程序 **DriverAssitant**。

##### 2.2.1.1.1. 安装DriverAssitant

解压DriverAssitant软件压缩包，双击 DriverInstall.exe 进入驱动安装界面。

![DriverInstall](https://doc.embedfire.com/linux/rk3588/quick_start/zh/latest/_images/DriverInstall.png) 

点击 **驱动安装** 即可开始安装驱动。如果不确定以前是否安装过旧版驱动， 先点击驱动卸载移除旧版本驱动程序，再点击驱动安装。

##### 2.2.1.1.2. 安装RKDevTool

瑞芯微专用USB烧录工具，Windows平台，可以使用USB接口将系统镜像下载到板卡中。

解压压缩包后无需安装即可使用，双击 RKDevTool.exe 进入软件界面。

软件主要有三大部分，分别是下载镜像、升级固件和高级功能。

![RKDevTool](https://doc.embedfire.com/linux/rk3588/quick_start/zh/latest/_images/RKDevTool1.png) 

#### 2.2.1.2. Recovery模式烧录镜像

该模式适合 **系统能够正常运行的板卡**。

我们打开 RKDevTool 烧录工具，并设置板卡进入烧录模式。

| `1 2 3 4 5 6` | `1.准备一根Type-c线和一根供电线，Type-c线用于镜像烧录 2.将所有有可能给板卡供电的接线都断开 3.使用一根Type-C线一端连接到板卡的OTG接口，另一端连接电脑的usb接口，然后打开软件RKDevTool 4.按住RECOVERY按键，然后使用供电线连接板卡给板卡进行通电 5.等待软件提示 发现一个LOADER设备（如下图所示），即可松开按键 6.如果不成功，重复2-5步骤。 ` |
| ------------- | ------------------------------------------------------------ |
|               |                                                              |

![REC](https://doc.embedfire.com/linux/rk3588/quick_start/zh/latest/_images/REC.png) 

然后就可以点击 固件 选择要烧录的镜像，然后点击打开

![REC-1](https://doc.embedfire.com/linux/rk3588/quick_start/zh/latest/_images/REC-1.png) 

等待固件加载完成，然后点击升级，开始烧录固件

![REC-2](https://doc.embedfire.com/linux/rk3588/quick_start/zh/latest/_images/REC-2.png) 

镜像烧录成功，如下图

![REC-3](https://doc.embedfire.com/linux/rk3588/quick_start/zh/latest/_images/REC-3.png) 

#### 2.2.1.3. MASKROM模式烧录镜像

该模式适合 **板卡未烧录系统或烧录的系统损坏无法运行（适应一切状况）**。

LubanCat-4 MASKROM按键如下图所示：

![3588-flash-1](https://doc.embedfire.com/linux/rk3588/quick_start/zh/latest/_images/3588-flash-1.png) 

LubanCat-5 MASKROM按键如下图所示：

![3588-flash-2](https://doc.embedfire.com/linux/rk3588/quick_start/zh/latest/_images/3588-flash-2.png) 

我们打开 RKDevTool 烧录工具，并设置板卡进入烧录模式。

| `1 2 3 4 5 6` | `1.准备一根Type-c线和一根供电线，Type-c线用于镜像烧录 2.将所有有可能给板卡供电的接线都断开 3.使用一根Type-C线一端连接到板卡的OTG接口，另一端连接电脑的usb接口，然后打开软件RKDevTool 4.按住MASKROM按键，然后使用供电线连接板卡给板卡进行通电 5.等待软件提示 发现一个MASKROM设备（如下图所示），即可松开按键 6.如果不成功，重复2-5步骤。 ` |
| ------------- | ------------------------------------------------------------ |
|               |                                                              |

![MR](https://doc.embedfire.com/linux/rk3588/quick_start/zh/latest/_images/MR.png) 

然后就可以点击 固件 选择要烧录的镜像，如update.img然后打开

![MR-2](https://doc.embedfire.com/linux/rk3588/quick_start/zh/latest/_images/MR-2.png) 

等待固件加载完成，然后点击升级，开始烧录固件

![MR-3](https://doc.embedfire.com/linux/rk3588/quick_start/zh/latest/_images/MR-3.png) 

镜像烧录成功，如下图

![MR-4](https://doc.embedfire.com/linux/rk3588/quick_start/zh/latest/_images/MR-4.png) 

### 2.2.2. 烧录镜像到SD卡

镜像烧录到SD卡需要专用烧录软件和SD卡读卡器。

#### 2.2.2.1. 安装SDDiskTool

烧录镜像到SD卡需要使用到烧录工具 **SD_Firmware_Tool.exe** 和SD卡格式化工具 **SDCardFormatter**。

安装 **SDCardFormatter** 后打开软件，识别到sd卡后点击Format即可。若识别不到可先用windows自带的格式化工具格式化，再使用此工具。

![SDCardFormatter](https://doc.embedfire.com/linux/rk3588/quick_start/zh/latest/_images/SDCardFormatter.png) 

SD_Firmware_Tool解压压缩包后无需安装即可使用，双击进入软件界面。

![SD_Firmware_Tool](https://doc.embedfire.com/linux/rk3588/quick_start/zh/latest/_images/SD_Firmware_Tool.png) 

#### 2.2.2.2. 烧录镜像

打开烧录SDDiskTool的可执行文件SD_Firmware_Tool.exe并插入SD卡。

首先选择正确的要烧录的SD卡，然后将功能模式选择位 SD启动 ， 再选择要烧录的镜像，最后点击开始创建烧录镜像到SD卡。

![SD_Firmware_Tool_flash](https://doc.embedfire.com/linux/rk3588/quick_start/zh/latest/_images/SD_Firmware_Tool_flash.png) 

耐心等待SD卡烧录完整，当镜像较大时，烧录的时间会相应变长。

注意

点击开始创建会有一定概率报错说无法烧录，可以关闭错误窗口再进行开始创建。

烧录成功，如下图

![../../_images/SD_Firmware_Tool_flash_scuess.png](https://doc.embedfire.com/linux/rk3588/quick_start/zh/latest/_images/SD_Firmware_Tool_flash_scuess.png)